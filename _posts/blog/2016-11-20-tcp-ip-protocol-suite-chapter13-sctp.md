---
layout: post
title: TCP/IP 协议族--流控制传输协议（SCTP）
categories: 计算机网络
description: 计算机网络学习总结
keywords: 计算机网路,TCP/IP,SCTP
---

　　最近在学习《TCP/IP SUITE》一书，作为学习总结记录于此，也作为以后自己复习的资料。
SCTP是可靠的面向报文的协议，它具有UDP和TCP的优点。SCTP和TCP一样也提供全双工的服务，也是使用确认机制来检查到达的数据的安全和可靠性。和TCP不同的是，SCTP允许在每个连接中使用**多重流服务** ，当某一个流被中断时，其他的流还能继续交付数据。而且，SCTP允许每一端使用多个IP地址。在SCTP中，连接叫做**关联** 。SCTP和TCP一样，都是在运输层。

## 1 SCTP的特点
	
### 1.1 传输序号（Transmission Sequence Number ，TSN）

　　TCP的数据单位是字节，但是在SCTP中数据的单位是数据块（data chunk）。SCTP使用传输序号（TSN）把数据块进行编号，TSN在SCTP中的作用和序号在TCP中的作用相似。

### 1.2 流标识符（Stream Identifier ，SI）

　　在TCP中，每个连接中只有一个流。但是在SCTP中，每个关联中可能有多个流。在SCTP中的每个流需要用一个**流标识符（SI）** 来标志。

### 1.3 流序号（Stream Sequence Number ，SSN）

　　为了区分属于同一个流中的不同数据块，SCTP使用SSN。要注意的是：传输序列号（TSN）和流序列号（SSN）是两种不同的序列号，TSN保证整个关联的可靠性，而SSN保证整个流的有序性。这样，在传输中，将数据的可靠性与有序性独立分开。

### 1.4 分组

　　在TCP中，报文段携带数据和控制信息。所携带的数据是作为一些字节的集合；而控制信息在首部中国用6个标识来定义。SCTP的设计则不同：数据由数据块携带，控制信息由控制块携带。若干个控制块和数据块可以包装成一个分组，SCTP的控制信息和数据信息处在不同的块中。在一个分组中，控制块在数据块之前。
![TCP的报文段和SCTP分组的比较](http://i.imgur.com/ZWdaZZV.png)

## 2 分组格式

### 2.1 通用首部
![通用首部](http://i.imgur.com/IhgjyVD.png)

- 验证标志（verification tag）：这个标志使得一个分组和一个关联相匹配，这个标志就是关联的额标识符。
- 检验和：需要注意的是，检验和的长度从16位（在UDP，TCP和IP中）增加到32位。

### 2.2 Data块
![DATA块](http://i.imgur.com/oeophqO.png)

　　DATA块的字段类型的值是0，标志字段有5位是保留的，只定义了3位：U,B和E。当U字段置为1时，表示不按顺序的数据，在这种情况下，流序号的值就被忽略。B位（开始）和E位（结束）共同定义一个块在分片的报文中的位置。当B=1和E=1时，表示没有分片，整各报文只有一个块。当B=1和E=0时，表示是第一个分片。当B=0和E=1时，表示是最后一个分片。当B=0和E=0时，表示是中间的分片。注意：DATA块的数据字段必须携带至少一个字节的数据，这就表示长度字段值不能小于17.
